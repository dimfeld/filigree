{%- raw -%}
{%- extends "transactional_base.html" -%}
{%- import "components.html" as cmp -%}
{%- block content -%}
{%- set email_qs = email | urlencode -%}
{%- set token_qs = token | urlencode -%}
{%- set url = url_scheme ~ '://' ~ host ~ '/login?token=' ~ token_qs ~ '&email=' ~ email_qs -%}
{%- if redirect_to -%}
  {%- set rs = redirect_to | urlencode -%}
  {%- set url = url ~ '&redirect_to=' ~ rs -%}
{%- endif -%}

<center>
  {{ cmp::button(text="Click here to log in", url=url) }}
</center>
<hr />
<p><small>This link will be valid for one hour. If it expires, you can <a href="{{url_scheme}}://{{host}}/login">generate a new one</a>.</small></p>
{%- endblock content -%}

{%- endraw -%}

